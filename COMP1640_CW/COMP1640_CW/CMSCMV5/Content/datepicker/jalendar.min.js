!function(a){a.fn.jalendar=function(e){function t(){T[1]=w(C);var e=new Date;e.setFullYear(b,D,0);var t=e.getDay();v.find(".header h1").html(o[l.lang][D]+" "+b+'<div class="total-bar"></div>'),v.find(".day").html("&nbsp;").removeAttr("data-date").removeClass("this-month have-event");for(var d=0;d<42-(t+T[D]);d++)v.find(".day").eq(t+T[D]+d).html("<span>"+(d+1)+"</span>");for(var d=0;t>d;d++){var r=void 0==T[D-1]?T[11]:T[D-1];v.find(".day").eq(d).html("<span>"+(r-t+(d+1))+"</span>")}for(var d=1;d<=T[D];d++){t++;var i;"dd-mm-yyyy"==l.dateType?i=d+"-"+(D+1)+"-"+b:"mm-dd-yyyy"==l.dateType?i=D+1+"-"+d+"-"+b:"yyyy-mm-dd"==l.dateType?i=b+"-"+(D+1)+"-"+d:"yyyy-dd-mm"==l.dateType&&(i=b+"-"+d+"-"+(D+1)),"linker"==l.type?v.find(".day").eq(t-1).addClass("this-month").attr("data-date",i).html('<span><a href="'+l.customUrl+i+'">'+d+"</a></span>"):v.find(".day").eq(t-1).addClass("this-month").attr("data-date",i).html("<span>"+d+"</span>")}D==E.getMonth()?v.find(".day.this-month").removeClass("today").eq(k-1).addClass("today"):v.find(".day.this-month").removeClass("today").attr("style",""),v.find(".days").attr("data-month",D+1).attr("data-year",b),v.find(".added-event").each(function(e){a(this).attr("data-id",e),v.find('.this-month[data-date="'+a(this).attr("data-date")+'"]').append(c("div","event-single").attr("data-id",e).append(c("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title")))),v.find(".day").has(".event-single").addClass("have-event")}),n(),null!==l.dayColor&&v.find(".day span, .day span a").css({color:l.dayColor}),null!==l.titleColor&&v.find(".header h1, .header .prv-m, .header .nxt-m, .event-single p, h3, .close-button").css({color:l.titleColor}),null!==l.weekColor&&v.find("h2").css({color:l.weekColor}),null!==l.todayColor&&v.find(".day.this-month.today span, .day.this-month.today span a").css({color:l.todayColor}),("#fff"==l.color||"#ffffff"==l.color||"white"==l.color)&&v.find(".header h1, .header .prv-m, .header .nxt-m, .day.today span, h2, .event-single p, h3, .close-button").css({"text-shadow":"none"})}function n(){var e=v.find(".this-month .event-single").length;0==e&&v.find(".total-bar").hide(0),v.find(".total-bar").text(e),v.find(".events h3 span").text(a(".jalendar .day.selected .event-single").length)}function d(){v.find(".day").removeClass("selected").removeAttr("style"),v.find(".add-event").removeClass("selected").height(0)}function r(){if(v.find(".day").removeClass("first-range range last-range"),null!==x)if(0==v.find('[data-date="'+q.val()+'"]').length){if(S<v.find(".days").attr("data-month")&&N>=v.find(".days").attr("data-year")||N<v.find(".days").attr("data-year")?x=0:(S>v.find(".days").attr("data-month")&&N<=v.find(".days").attr("data-month")||N>v.find(".days").attr("data-year"))&&(x=42),null!==M){if(N==z&&S==j)return!1;var a=parseInt(v.find(".days").attr("data-year"),10),e=parseInt(v.find(".days").attr("data-month"),10);(a>N&&z>a||j>e&&z>=a&&a>N||e>S&&N==a&&j>e&&z==a||e>S&&z>a&&N==a||e>S&&N==a&&j>e&&z>=a)&&v.find(".day").addClass("range")}}else x=v.find('[data-date="'+q.val()+'"]').index()}function i(){v.find('.day[data-date="'+q.val()+'"]').addClass("first-range"),v.find('.day[data-date="'+F.val()+'"]').addClass("last-range"),v.find('.day[data-date="'+q.val()+'"]').nextUntil('.day[data-date="'+F.val()+'"]').addClass("range"),v.find('.day[data-date="'+F.val()+'"]').length>0&&(v.find(".day.first-range").length>0?v.find(".day.first-range").nextUntil(".day.last-range").addClass("range"):v.find(".day.last-range").prevUntil(".day:eq(0)").addClass("range"))}var l=a.extend({customDay:new Date,color:"#207cd1",color2:"",lang:"EN",type:"",customUrl:"#",dateType:"dd-mm-yyyy",dayColor:null,titleColor:null,weekColor:null,todayColor:null,done:null},e),s={},o={},f={},y={},h={},p={},u={};s.EN=new Array("Mon","Tue","Wed","Thu","Fri","Sat","Sun"),s.TR=new Array("Pzt","Sal","Çar","Per","Cum","Cmt","Pzr"),s.ES=new Array("Lun","Mar","Mié","Jue","Vie","Såb","Dom"),s.DE=new Array("Mon","Die","Mit","Don","Fre","Sam","Son"),o.EN=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),o.TR=new Array("Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"),o.ES=new Array("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"),o.DE=new Array("Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"),f.EN="Add New Event",f.TR="Yeni Etkinlik Ekle",f.ES="Agregar Un Nuevo Evento",f.DE="Neuen termin hinzufügen",y.EN="All Day",y.TR="Tüm Gün",y.ES="Todo El Día",y.DE="Den ganzen tag",h.EN="Total Events in This Month: ",h.TR="Bu Ayki Etkinlik Sayısı: ",h.ES="Total De Eventos En Este Mes: ",h.DE="Insgesamt Veranstaltungen in diesem Monat: ",p.EN="Event(s)",p.TR="Etkinlik",p.ES="Evento(s)",p.DE="Tätigkeit",u.EN="Close",u.TR="Kapat",u.ES="Cerrar",u.DE="Schließen";var v=a(this),c=function(e,t){return a(document.createElement(e)).addClass(t)},m=""===l.color2?l.color:l.color2;v.append(a('<input type="hidden" class="data1" /><input type="hidden" class="data2" />'),c("div","jalendar-container").append(c("div","jalendar-pages").append(c("div","header").append(c("a","prv-m").append(c("i","fa fa-angle-left")),c("h1"),c("a","nxt-m").append(c("i","fa fa-angle-right")),c("div","day-names")),c("div","days"),c("div","add-event").append(c("div","events").append(c("h3","").html("<span></span> "+p[l.lang]),c("div","events-list")),c("div","close-button").text(u[l.lang]))).attr("style","background-color:"+l.color+"; background: -webkit-gradient(linear, left top, left bottom, from("+l.color+"), to("+m+")); background: -webkit-linear-gradient(top, "+l.color+", "+m+"); background : -moz-linear-gradient(top, "+l.color+", "+m+"); background: -ms-linear-gradient(top, "+l.color+", "+m+"); background: -o-linear-gradient(top, "+l.color+", "+m+");"))),"range"==l.type&&v.find(".jalendar-pages").addClass("range").append(c("input","first-range-data").attr({type:"hidden"}),c("input","last-range-data").attr({type:"hidden"}));for(var g=0;42>g;g++)v.find(".days").append(c("div","day"));for(var g=0;7>g;g++)v.find(".day-names").append(c("h2").text(s[l.lang][g]));var C,E=new Date(l.customDay),b=E.getFullYear(),k=E.getDate(),D=E.getMonth(),A=function(a){var e=new Date;return e.setYear(a),e.setMonth(1),e.setDate(29),29==e.getDate()},w=function(a){return a=A(b)===!0?29:28},T=new Array(31,w(C),31,30,31,30,31,31,30,31,30,31),x=null,M=null,S=null,j=null,N=null,z=null;t();var J=new Array(v.find(".prv-m"),v.find(".nxt-m")),q=(v.find(".jalendar .close-button"),v.find("input.first-range-data")),F=v.find("input.last-range-data");J[1].on("click",function(){D>=11?(D=0,b++):D++,t(),d(),"range"==l.type&&(r(),i())}),J[0].on("click",function(){dayClick=v.find(".this-month"),0===D?(D=11,b--):D--,t(),d(),"range"==l.type&&(r(),i())}),v.on("click",".close-button",function(a){a.preventDefault(),v.find(".add-event").removeClass("selected").height(0),v.find(".this-month.selected").removeClass("selected")}),v.on("click",".this-month",function(){function e(a){a.parent().find(".day").removeClass("first-range").removeClass("range").removeClass("last-range"),a.addClass("first-range"),q.val(a.attr("data-date")),x=v.find('[data-date="'+v.find(".first-range").attr("data-date")+'"]').index(),S=v.find(".days").attr("data-month"),N=v.find(".days").attr("data-year"),M=null,F.val("")}function t(a){a.addClass("last-range"),F.val(a.attr("data-date")),M=v.find(".last-range").index(),j=v.find(".days").attr("data-month"),z=v.find(".days").attr("data-year")}if("selector"==l.type)return v.find("input.data1").val(a(this).data("date")),a(this).parent().find(".selected").removeClass("selected"),a(this).addClass("selected"),v.parent().is(".jalendar-input")&&(v.parent().find("input").removeClass("selected"),v.parent(".jalendar-input").find("input").val(a(this).data("date"))),null!==l.done&&l.done.call(this),!1;if("range"==l.type){a(this).parent().find(".first-range"),a(this).parent().find(".last-range");if(null!==x)if(null!==M)e(a(this));else{if(x>a(this).index())return e(a(this)),!1;t(a(this)),v.find("input.data1").val(q.val()),v.find("input.data2").val(F.val()),v.parent().is(".jalendar-input")&&(v.parent().find("input").removeClass("selected"),v.parent(".jalendar-input").find("input").val(v.find("input.data1").val()+", "+v.find("input.data2").val())),null!==l.done&&l.done.call(this)}else e(a(this));return v.on({mouseenter:function(){return null===x?!1:void(""===F.val()&&(v.find(".day").removeClass("range last-range"),a(this).index()>x&&a(this).hasClass("this-month")&&(a(this).addClass("last-range"),a(this).parent().find(".day:eq("+x+")").nextUntil(".this-month.last-range").addClass("range"))))},mouseleave:function(){""===F.val()&&a(this).parent().find(".day").removeClass("last-range").removeClass("range")}},".range .day.this-month"),!1}var n=a(this).find(".event-single");v.find(".events .event-single").remove(),d(),""===l.type&&(v.find("input.data1").val(a(this).data("date")),a(this).addClass("selected"),v.find(".add-event").find(".events-list").html(n.clone()),v.parent().is(".jalendar-input")&&v.parent(".jalendar-input").find("input").val(a(this).data("date")),v.find(".events .event-single").length>=0&&v.find(".events h3 span").html(v.find(".events .event-single").size()),v.find(".add-event").addClass("selected").height(v.find(".add-event .events").height()+59))}),v.parent().is(".jalendar-input")&&v.parent(".jalendar-input").find('input[type="text"], .jalendar').on("click",function(e){e.stopPropagation(),a(this).addClass("selected")}),a("html").on("click",function(){a(".jalendar-input input").removeClass("selected")})}}(jQuery);